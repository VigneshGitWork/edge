(self.webpackChunkskyplus_container_app=self.webpackChunkskyplus_container_app||[]).push([[7572,1540,4289,4317],{17572:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});n(69358),n(48324),n(69373),n(59903),n(59749),n(86544),n(60228),n(21057),n(79288);var r=n(28416),o=n.n(r),i=n(20745),a=(n(34284),n(268),n(73964),n(76801),n(43843),n(752),n(21694),n(76265),n(78730),n(79307),n(84254),n(70560),n(89730),n(12826),n(77049),n(64043),n(7409),n(41609)),u=n.n(a),s=n(84317),c=n(36730),l=n(41540),f=n(88415),p=n(20475);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.aemGraphqlApiEndpoint&&window.aemGraphqlApiEndpoint,window.locale;var g=function(e){var t={},n=e;try{return window[n]||t}catch(e){return console.log(e),t}};function E(e){var t=(0,r.useRef)(null),n=d(o().useState(null),2),i=n[0],a=(n[1],d(o().useState(!0),2)),v=a[0],E=a[1],_=d(o().useState(!0),2),y=_[0],S=_[1],T=d(o().useState(4),2),m=T[0],h=T[1];(0,r.useEffect)((function(){return document.addEventListener(s.events.INITIATE_PAYMENT,I),document.addEventListener("EVENT_PASSENGEREDIT_TOGGLE_LOADING",O),function(){document.removeEventListener(s.events.INITIATE_PAYMENT,I)}}),[]),o().useEffect((function(){t.current&&v&&!u()(i)&&E(!1)}),[i]);var O=function(e){var t,n;(null!=e&&e.detail.isLoading?S(!0):S(!1),null!=e&&null!==(t=e.detail)&&void 0!==t&&t.paymentStepNumber)&&h(null==e||null===(n=e.detail)||void 0===n?void 0:n.paymentStepNumber)},A=function(e,t,n){var r={"indigoSessionTransfer.apiToken":e,"indigoSessionTransfer.refUrl":t.startsWith("/")?location.origin+t:t,"indigoSessionTransfer.skyplusBookingComment":""},o=(0,c.getLocalStorage)(l.localStorageKeys.SPECIALFARE_ID_DATA);null!=o&&o.commentText&&(r["indigoSessionTransfer.skyplusBookingComment"]=null==o?void 0:o.commentText),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("form");for(var r in n.target="_self",n.method="POST",n.action=e,t)if(t.hasOwnProperty(r)){var o=document.createElement("input");o.type="hidden",o.name=r,o.value=t[r],n.appendChild(o)}document.body.appendChild(n),n.submit()}(n,r)},I=function(e){var t=window.pageType===p.PE_PAGETYPE;console.log("---event Listen::::::::::::::::",e);var n=(null==e?void 0:e.detail)||{},r=g("_env_passenger_edit");if(n.token){var o="",i="";Object.keys(r).length>0&&r.API_HOLD_URL?(o=r.API_HOLD_URL,i=r.USERKEY_HOLD_URL):location.origin.includes("qa")?(o="https://api-qa-itinerary-save-skyplus6e.goindigo.in/v1/booking/hold",i="c5d5ef6951133b7cf43adfbb5c97e270"):(o="https://api-dev-itinerary-save-skyplus6e.goindigo.in/v1/booking/hold",i="dcf2213daf978fddf6ca759aa58dbf33");var a,u={method:"POST",body:JSON.stringify({notifyContact:!0,comments:[{type:"Default",text:"Updating 2March,2023"}]}),headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:n.token,user_key:i}},s="https://comm-uat.goindigo.in/IndiGo-Dev2/Booking/PaymentDeepLinkApp?pl=",c=location.origin+"/booking/itinerary",l=window.msd||{};if(l.paymentPagePath&&(s=l.paymentPagePath),null!=n&&n.refUrl?c=null==n?void 0:n.refUrl:l.itineraryPagePath&&(c=l.itineraryPagePath),t)null!==(a=c)&&void 0!==a&&a.includes("?")?c+="&isBookingFlow=1":c+="?isBookingFlow=1";var d=new URL(s).searchParams.get("v"),v="2"===d;console.log("---\x3e",v,d,s),v?function(e,t,n){var r,o="https://api-dev-session-skyplus6e.goindigo.in/v1/token/get",i="6ef12f4a8299c033c68a4431daf670e1",a=g("_env_login");Object.keys(a).length>0&&a.BASE_API_URL&&(o=a.BASE_API_URL+"/v1/token/get",i=null===(r=a.CONTENT_TYPE_HEADER)||void 0===r?void 0:r.user_key);var u={method:"GET",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Authorization:e.token,user_key:i}};fetch(o,u).then((function(e){return e.json()})).then((function(e){var r,o;console.log("---getserverContext API:::::",e);var i=(null==e||null===(r=e.data)||void 0===r||null===(o=r.serverContext)||void 0===o?void 0:o.token)||"";A(i,t,n)}))}(n,c,s):fetch(o,u).then((function(e){return e.json()})).then((function(e){var t,n;console.log("---json hold::::",e);var r=(null==e||null===(t=e.data)||void 0===t||null===(n=t.bookingDetail)||void 0===n?void 0:n.pl)||"";r&&(s+=r+"&refurl="+c,window.open(s,"_self"))})).catch((function(e){(0,f.pushAnalytic)({event:"error",error:{code:"500",message:e.message,url:o,type:"api",source:"api",statusCode:"500",statusMessage:e.message}})}))}};return o().createElement("div",{ref:t},o().createElement("p",{className:"payment-app-container "+(y?"payment-app-displaynone":""),id:"paymentapp-expand-collapse"},m,". Payment"))}E.defaultProps={pageType:"",persona:"wwc"};var _=E;function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"init",value:function(e){var t=JSON.parse(JSON.stringify(e.dataset));(0,i.s)(e).render(o().createElement(_,t))}}],(n=null)&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},41540:function(e,t,n){"use strict";n.r(t),n.d(t,{localStorageKeys:function(){return r}});var r={USER_NATIONALITY:"usr_nlty",RECENT_SOURCE_CITIES:"src_list",RECENT_DESTINATION_CITIES:"dest_list",NEARBY_DESTINATION_LIST:"nrby_dest_list",NEARBY_STATION:"nrby_stat",BOOKING_CONTEXT_VALUES:"bw_cntxt_val",FLIGHT_SEARCH_PAYLOAD:"flght_srch_d",LOCATION:"location",SPECIALFARE_ID_DATA:"speci_pa_dat",GENERIC_DATA_CONTAINER_APP:"generic_data_container_app",ERROR_CODE_AEM_MAPPING:"info_errorMessageItemList"}},24289:function(e,t,n){"use strict";n.r(t),t.default={LOGIN_SUCCESS:"loginSuccessEvent",LOGOUT_SUCCESS:"logoutSuccessEvent",TOGGLE_LOGIN_POPUP:"toggleLoginPopupEvent",LOGIN_BUTTON_DROPDOWN_TOGGLED:"loginItemToggledEvent",GENERIC_TOAST_MESSAGE_EVENT:"genericToastMessageEvent",MAIN_LOADER_EVENT:"mainLoaderEvent",TOGGLE_LOGEDIN_HEADER:"TOGGLE_LOGEDIN_HEADER",HAMBURGER_LOGOUT_SUCCESS_EVENT:"HAMBURGER_LOGOUT_SUCCESS_EVENT",INITIATE_PAYMENT:"INITIATE_PAYMENT",QUERY_PARAM_LOGOUT_SUCCESS_EVENT:"QUERY_PARAM_LOGOUT_SUCCESS_EVENT",CHANGE_FLIGHT_CUSTOM_EVENT:"pnr-details",TOKEN_COOKIE_UPDATE:"TOKEN_COOKIE_UPDATE"}},84317:function(e,t,n){"use strict";n.r(t),n.d(t,{customEvents:function(){return o.default},events:function(){return r.default}});var r=n(24289),o=n(45899)},36730:function(e,t,n){"use strict";n.r(t),n.d(t,{clearLocalStorage:function(){return a},getLocalStorage:function(){return r},getSessionStorageWithExp:function(){return s},removeLocalStorage:function(){return i},setLocalStorage:function(){return o},setSessionStorageWithExp:function(){return u}});n(69358),n(48324);var r=function(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return console.log("catch getLocalStorage:::error",e),{}}},o=function(e,t){return localStorage.setItem(e,JSON.stringify(t)),!0},i=function(e){localStorage.removeItem(e)},a=function(){return localStorage.clear(),!0},u=function(e,t,n){var r={value:t,expiry:(new Date).getTime()+6e4*n};sessionStorage.setItem(e,JSON.stringify(r))},s=function(e){var t=sessionStorage.getItem(e);if(!t)return null;var n=JSON.parse(t);return(new Date).getTime()>n.expiry?(sessionStorage.removeItem(e),null):n.value}},18552:function(e,t,n){var r=n(10852)(n(55639),"DataView");e.exports=r},53818:function(e,t,n){var r=n(10852)(n(55639),"Promise");e.exports=r},58525:function(e,t,n){var r=n(10852)(n(55639),"Set");e.exports=r},70577:function(e,t,n){var r=n(10852)(n(55639),"WeakMap");e.exports=r},280:function(e,t,n){var r=n(25726),o=n(86916),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},64160:function(e,t,n){var r=n(18552),o=n(57071),i=n(53818),a=n(58525),u=n(70577),s=n(44239),c=n(80346),l="[object Map]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",g=c(r),E=c(o),_=c(i),y=c(a),S=c(u),T=s;(r&&T(new r(new ArrayBuffer(1)))!=v||o&&T(new o)!=l||i&&T(i.resolve())!=f||a&&T(new a)!=p||u&&T(new u)!=d)&&(T=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return v;case E:return l;case _:return f;case y:return p;case S:return d}return t}),e.exports=T},86916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},41609:function(e,t,n){var r=n(280),o=n(64160),i=n(35694),a=n(1469),u=n(98612),s=n(44144),c=n(25726),l=n(36719),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||l(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},20745:function(e,t,n){"use strict";var r=n(31051);t.s=r.createRoot,r.hydrateRoot},27413:function(e,t,n){"use strict";var r=n(44201)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},42124:function(e,t,n){"use strict";var r=n(91245),o=TypeError;e.exports=function(e){if(r(e))throw new o("The method doesn't accept regular expressions");return e}},76801:function(e,t,n){"use strict";var r=n(79989),o=n(84328).includes,i=n(3689),a=n(87370);r({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},43843:function(e,t,n){"use strict";var r=n(79989),o=n(68844),i=n(42124),a=n(74684),u=n(34327),s=n(27413),c=o("".indexOf);r({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~c(u(a(this)),u(i(e)),arguments.length>1?arguments[1]:void 0)}})},268:function(e,t,n){"use strict";var r,o=n(79989),i=n(46576),a=n(82474).f,u=n(43126),s=n(34327),c=n(42124),l=n(74684),f=n(27413),p=n(53931),d=i("".startsWith),v=i("".slice),g=Math.min,E=f("startsWith");o({target:"String",proto:!0,forced:!!(p||E||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!E},{startsWith:function(e){var t=s(l(this));c(e);var n=u(g(arguments.length>1?arguments[1]:void 0,t.length)),r=s(e);return d?d(t,r,n):v(t,n,n+r.length)===r}})}}]);